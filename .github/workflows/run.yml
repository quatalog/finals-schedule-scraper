name: Save finals schedule PDF

on:
  #schedule:
  #- cron: '0 * * * *'
  workflow_dispatch:

jobs:
  get-files:
    name: Get link from Registrars website and download it
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Clone repo
        uses: actions/checkout@v3
        
      #- name: Setup pdftotext
      #  run: sudo apt-get install poppler-utils
      #
      #- name: Set up Python
      #  uses: actions/setup-python@v2
      #  with:
      #    python-version: '3.10'

      - name: Get data
        run: |
          curl -o registrar_grades.html 'https://info.rpi.edu/registrar/grades'
          grep -oie '[^"]*box\.com[^"]*' registrar_grades.html 
            
      - name: Commit data
        run: |
          git config user.name "Quatalog Updater" && git config user.email "github_actions@quatalog.com"
          git add *.pdf registrar_grades.html
          git commit --allow-empty -m "$(date -u)"
          git push
